# Тестовое задание

Приложение работает по адресу http://localhost:8080/user.

## Содержание

1. [Part 1 Виртуальная машина](#part-1-виртуальная-машина)
2. [Part 2 Заглушка](#part-2-заглушка)
3. [Part 3 Метрики JVM](#part-3-метрики-jvm)

## Part 1 Виртуальная машина

1) С помощью Oracle VM создать виртуальную машину с Ubuntu. Настроить два сетевых адаптера: nat и сетевой мост.

2) Развернуть на виртуальной машине TIG стек (Telegraf + InfluxDB + Grafana). Подключить в Grafana дашборд под Linux (использовать готовый шаблон с официального сайта).

3) Развернуть Telegraf на хосте и отправлять метрики в виртуальную машину. В InfluxDB создать отдельную базу данных под эти метрики. Подключить в Grafana дашборд под Windows (использовать готовый шаблон с официального сайта).

4) Проверить работу Grafana с хоста. Открыть на хосте в браузере Grafana, развернутую на виртуальной машине.

Заметки по выполнению задания описаны в файле [part_1.md](./notes/part_1.md).

## Part 2 Заглушка

1) Написать заглушку на java с использованием **Spring** и **Maven**. Заглушка реализует RESTapi с двумя методами **GET** и **POST**.

2) Метод `GET` выдаёт статичный JSON (можно использовать объект String, главное формат JSON).

```json
{
    "login": "Login1",
    "status": "ok"
}
```

3) Метод `POST` принимает JSON с двумя параметрами `login` и `password`.

```json
{
    "login": "...",
    "password": "..."
}
```
Возвращает JSON с параметрами `login`, `password` и `date` (текущая дата в формате "yyyy-MM-dd HH:mm:ss").

```json
{
    "login": "...",
    "password": "...",
    "date": "yyyy-MM-dd HH:mm:ss"
}
```

4) Реализовать время отклика методов `GET` и `POST` в заглушке от 1 до 2 секунд.

5) Реализовать скрипт в JMeter, который отправляет запросы в заглушку. Провести тест поиска максимума.

Заметки по выполнению задания описаны в файле [part_2.md](./notes/part_2.md).

## Part 3 Метрики JVM

1) Добавить обработку исключений. Если в запрос `POST` передаются не корректные данные, то выкидывать 400 ошибку (реализовать при помощи аннотации `@Valid`). Запушить изменения в git.

2) Развернуть заглушку на виртуальной машине (клонировать git репозиторий на виртуальную машину, собрать jar через консоль при помощи maven, запустить jar и проверить работу при помощи Postman и JMeter с хоста).

3) Прикрутить к заглушке jolokia agent (не добавлением maven зависимости, а именно запуск javaagent вместе с заглушкой).

4) Настроить Telegraf под jolokia и добавить дашборд JVM метрик !jolokia в grafana с официального сайта (там же можно найти необходимые настройки config файла Telegraf).

Заметки по выполнению задания описаны в файле [part_3.md](./notes/part_3.md).